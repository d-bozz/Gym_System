

create database DBGymSystem

go

use DBGymSystem

go

create table Rol(
idRol int primary key identity(1,1),
descripcion varchar(50),
esActivo bit,
fechaRegistro datetime default getdate()
)

go

create table Usuario(
idUsuario int primary key identity(1,1),
nombreApellidos varchar(100),
correo varchar(40),
idRol int references Rol(idRol),
clave varchar(40),
esActivo bit,
telefono varchar(25),
direccion varchar(250),
horario varchar(250),
foto varchar(max)
)

go

create table Categoria(
idCategoria int primary key identity(1,1),
descripcion varchar(50),
esActivo bit,
fechaRegistro datetime default getdate()
)

go

create table Producto (
idProducto int primary key identity(1,1),
nombre varchar(100),
descripcion varchar(250),
idCategoria int references Categoria(idCategoria),
stock int,
precio decimal(10,2),
esActivo bit,
fechaRegistro datetime default getdate(),
marca varchar(100),
peso varchar(10),
foto varchar(max)
)

go

create table NumeroDocumento(
idNumeroDocumento int primary key identity(1,1),
ultimo_Numero int not null,
fechaRegistro datetime default getdate()
)

go

create table Venta(
    idVenta int primary key identity(1,1),
    numeroDocumento varchar(40),
    tipoPago varchar(50),
    fechaRegistro datetime default getdate(),
    total decimal(10,2),
    cliente varchar(50)
)

go

create table DetalleVenta(
    idDetalleVenta int primary key identity(1,1),
    idVenta int references Venta(idVenta),
    idProducto int references Producto(idProducto),
    cantidad int,
    precio decimal(10,2),
    total decimal(10,2)
)

go

CREATE TABLE Socio (
    idSocio INT PRIMARY KEY IDENTITY(1,1),
    nombre VARCHAR(100),
	apellido VARCHAR(100),
	telefono VARCHAR(100),
	correo VARCHAR(40),
    fechaInicioMembresia DATETIME,
    activo BIT,
	restricciones VARCHAR(250),
	mutualista VARCHAR(100),
    direccion VARCHAR(250),
    telefonoContacto varchar(50)
)

go

create table PagoMensual (
    idPago int primary key identity(1,1),
    idSocio int references Socio(idSocio),
    mes int,
    anio int,
    fechaPago datetime,
    monto decimal(10,2),
)

go

create table HorarioActividad (
    idHorario int primary key identity(1,1),
    diaSemana varchar(20),
    horaInicio time,
    horaFin time,
    actividad varchar(100),
    encargado varchar(50)
)

go

create table Asistencia (
    idAsistencia int primary key identity(1,1),
    idSocio int references Socio(idSocio),
    idHorario int references HorarioActividad(idHorario),
    fechaAsistencia datetime,
)
